2024-01-30 15:55:08,892:INFO : **no existing touched records log file found...**
2024-01-30 15:55:08,893:INFO : **no existing failed records log file found...**
2024-01-30 15:55:08,893:INFO : Starting to load records into Invenio...
2024-01-30 15:55:08,893:INFO : Loading records 1 (by index in import file)...
2024-01-30 15:55:09,395:INFO : ....starting to load record 1
2024-01-30 15:55:09,395:INFO :     10.17613/M6BP51 hc:10053 1000361-170
2024-01-30 15:55:09,603:INFO :     finding or creating community...
2024-01-30 15:55:10,439:INFO :     finding or creating draft metadata record...
2024-01-30 15:55:10,707:INFO :     creating new draft record...
2024-01-30 15:55:10,953:INFO :     uploading files for draft...
2024-01-30 15:55:10,953:INFO :     uploading files to draft...
2024-01-30 15:55:11,000:ERROR : ERROR: [Errno 2] No such file or directory: '/Users/kcr-untracked-files/humcore/o_1b2gn32v4ub61osv1o22ju716767.pdf.slater-religion-and-nationalism-in-the-thought-of-shmuel-alexandrov.pdf'
2024-01-30 15:55:11,000:ERROR : ERROR: ['Traceback (most recent call last):\n', '  File "/Users/ianscott/Development/invenio-record-importer/invenio_record_importer/record_loader.py", line 1413, in load_records_into_invenio\n    result = create_full_invenio_record(rec, no_updates)\n', '  File "/Users/ianscott/Development/invenio-record-importer/invenio_record_importer/record_loader.py", line 1010, in create_full_invenio_record\n    uploaded_files = upload_draft_files(\n', '  File "/Users/ianscott/Development/invenio-record-importer/invenio_record_importer/record_loader.py", line 419, in upload_draft_files\n    with open(\n', "FileNotFoundError: [Errno 2] No such file or directory: '/Users/kcr-untracked-files/humcore/o_1b2gn32v4ub61osv1o22ju716767.pdf.slater-religion-and-nationalism-in-the-thought-of-shmuel-alexandrov.pdf'\n"]
2024-01-30 15:55:11,010:INFO : ....done with record 1
2024-01-30 15:55:11,010:INFO : All done loading records into InvenioRDM
2024-01-30 15:55:11,010:INFO : Processed 1 records in InvenioRDM (1) 
    0 successful 
    0 new records created 
    0 already existed 
        0 updated published records 
        0 updated existing draft records 
        0 unchanged existing records 
        0 previously failed records repaired 
    1 failed 

2024-01-30 15:55:11,010:INFO : Failed records:
2024-01-30 15:55:11,010:INFO : {'index': 1, 'invenio_id': '10.17613/M6BP51', 'commons_id': 'hc:10053', 'core_record_id': '1000361-170'}
2024-01-30 15:55:11,010:INFO : Failed records written to logs/invenio_record_importer_failed.jsonl
2024-01-30 15:55:11,010:INFO : Touched records written to logs/invenio_record_importer_touched.jsonl
2024-01-30 15:58:51,067:INFO : Starting to load records into Invenio...
2024-01-30 15:58:51,067:INFO : Loading records 1 (by index in import file)...
2024-01-30 15:58:51,566:INFO : ....starting to load record 1
2024-01-30 15:58:51,566:INFO :     10.17613/M6BP51 hc:10053 1000361-170
2024-01-30 15:58:51,766:INFO :     finding or creating community...
2024-01-30 15:58:51,908:INFO :     finding or creating draft metadata record...
2024-01-30 15:58:52,303:INFO :     found 1 existing records with same DOI...
2024-01-30 15:58:52,304:INFO :     continuing with existing draft (same metadata)...
2024-01-30 15:58:52,304:INFO :     uploading files for draft...
2024-01-30 15:58:52,467:INFO :     existing record had wrong or partial upload, now deleted
2024-01-30 15:58:52,467:INFO :     uploading files to draft...
2024-01-30 15:58:53,274:INFO :     attaching the record to the community...
2024-01-30 15:58:54,093:INFO :     creating or finding the user (submitter)...
2024-01-30 15:58:59,397:INFO :     created new user Tsachisl@gmail.com...
2024-01-30 15:59:02,684:INFO :     activated new user Tsachisl@gmail.com...
2024-01-30 15:59:06,127:INFO :     confirmed new user, id 5...
2024-01-30 15:59:06,128:INFO :     re-assigning ownership of the record to the submitter (Tsachisl@gmail.com, 5)...
2024-01-30 15:59:06,135:INFO :     found existing user 4...
2024-01-30 15:59:06,135:ERROR : ERROR: local variable 'user_id' referenced before assignment
2024-01-30 15:59:06,135:ERROR : ERROR: ['Traceback (most recent call last):\n', '  File "/Users/ianscott/Development/invenio-record-importer/invenio_record_importer/record_loader.py", line 1413, in load_records_into_invenio\n    result = create_full_invenio_record(rec, no_updates)\n', '  File "/Users/ianscott/Development/invenio-record-importer/invenio_record_importer/record_loader.py", line 1181, in create_full_invenio_record\n    current_owner_id = get_invenio_user("scottia4@msu.edu")\n', '  File "/Users/ianscott/Development/invenio-record-importer/invenio_record_importer/record_loader.py", line 685, in get_invenio_user\n    return create_invenio_user(user_email)["user_id"]\n', '  File "/Users/ianscott/Development/invenio-record-importer/invenio_record_importer/record_loader.py", line 678, in create_invenio_user\n    return {"user_id": user_id, "new_user": new_user_flag}\n', "UnboundLocalError: local variable 'user_id' referenced before assignment\n"]
2024-01-30 15:59:06,182:INFO : ....done with record 1
2024-01-30 15:59:06,182:INFO : All done loading records into InvenioRDM
2024-01-30 15:59:06,182:INFO : Processed 1 records in InvenioRDM (1) 
    0 successful 
    0 new records created 
    0 already existed 
        0 updated published records 
        0 updated existing draft records 
        0 unchanged existing records 
        0 previously failed records repaired 
    1 failed 

2024-01-30 15:59:06,183:INFO : Failed records:
2024-01-30 15:59:06,183:INFO : {'index': 1, 'invenio_id': '10.17613/M6BP51', 'commons_id': 'hc:10053', 'core_record_id': '1000361-170'}
2024-01-30 15:59:06,183:INFO : Failed records written to logs/invenio_record_importer_failed.jsonl
2024-01-30 15:59:06,183:INFO : Touched records written to logs/invenio_record_importer_touched.jsonl
2024-01-30 16:01:37,047:INFO : Starting to load records into Invenio...
2024-01-30 16:01:37,048:INFO : Loading records 1 (by index in import file)...
2024-01-30 16:01:37,541:INFO : ....starting to load record 1
2024-01-30 16:01:37,541:INFO :     10.17613/M6BP51 hc:10053 1000361-170
2024-01-30 16:01:37,750:INFO :     finding or creating community...
2024-01-30 16:01:37,881:INFO :     finding or creating draft metadata record...
2024-01-30 16:01:38,091:INFO :     found 1 existing records with same DOI...
2024-01-30 16:01:38,092:INFO :     continuing with existing published record (same metadata)...
2024-01-30 16:01:38,092:INFO :     uploading files for draft...
2024-01-30 16:01:38,162:INFO :     skipping uploading files (same already uploaded)...
2024-01-30 16:01:38,162:INFO :     skipping attaching the record to the community (already published to it)...
2024-01-30 16:01:38,162:INFO :     creating or finding the user (submitter)...
2024-01-30 16:01:38,188:INFO :     found existing user 5...
2024-01-30 16:01:38,188:INFO :     re-assigning ownership of the record to the submitter (Tsachisl@gmail.com, 5)...
2024-01-30 16:01:38,189:INFO :     found existing user 4...
2024-01-30 16:01:41,855:INFO :     repaired previously failed record...
2024-01-30 16:01:41,855:INFO :     10.17613/M6BP51 hc:10053 1000361-170
2024-01-30 16:01:41,934:INFO : ....done with record 1
2024-01-30 16:01:41,934:INFO : All done loading records into InvenioRDM
2024-01-30 16:01:41,934:INFO : Processed 1 records in InvenioRDM (1) 
    1 successful 
    0 new records created 
    1 already existed 
        0 updated published records 
        0 updated existing draft records 
        1 unchanged existing records 
        1 previously failed records repaired 
    0 failed 

2024-01-30 16:01:41,934:INFO : Previously failed records repaired:
2024-01-30 16:01:41,934:INFO : {'index': 1, 'invenio_id': '10.17613/M6BP51', 'commons_id': 'hc:10053', 'core_record_id': '1000361-170'}
2024-01-30 16:01:41,935:INFO : Touched records written to logs/invenio_record_importer_touched.jsonl
2024-01-30 16:14:50,223:INFO : Starting to load records into Invenio...
2024-01-30 16:14:50,224:INFO : Loading records 1 (by index in import file)...
2024-01-30 16:14:50,700:INFO : ....starting to load record 1
2024-01-30 16:14:50,700:INFO :     10.17613/M6BP51 hc:10053 1000361-170
2024-01-30 16:14:50,904:INFO :     finding or creating community...
2024-01-30 16:14:51,186:INFO :     finding or creating draft metadata record...
2024-01-30 16:14:51,472:INFO :     found 1 existing records with same DOI...
2024-01-30 16:14:51,472:INFO :     continuing with existing published record (same metadata)...
2024-01-30 16:14:51,472:INFO :     uploading files for draft...
2024-01-30 16:14:51,548:INFO :     skipping uploading files (same already uploaded)...
2024-01-30 16:14:51,549:INFO :     skipping attaching the record to the community (already published to it)...
2024-01-30 16:14:51,549:INFO :     creating or finding the user (submitter)...
2024-01-30 16:14:51,578:INFO :     found existing user 5...
2024-01-30 16:14:51,578:INFO :     skipping re-assigning ownership of the record 
2024-01-30 16:14:51,578:INFO :     (already belongs to Tsachisl@gmail.com, user 5)...
2024-01-30 16:14:51,650:INFO : ....done with record 1
2024-01-30 16:14:51,650:INFO : All done loading records into InvenioRDM
2024-01-30 16:14:51,650:INFO : Processed 1 records in InvenioRDM (1) 
    1 successful 
    0 new records created 
    1 already existed 
        0 updated published records 
        0 updated existing draft records 
        1 unchanged existing records 
        0 previously failed records repaired 
    0 failed 

2024-01-30 16:14:51,651:INFO : Touched records written to logs/invenio_record_importer_touched.jsonl
2024-01-30 16:15:22,025:INFO : Starting to load records into Invenio...
2024-01-30 16:15:22,025:INFO : Loading records from 2 to 3...
2024-01-30 16:15:22,026:INFO : ....starting to load record 2
2024-01-30 16:15:22,026:INFO :     10.17613/M6T92F hc:11041 1000361-229
2024-01-30 16:15:22,229:INFO :     finding or creating community...
2024-01-30 16:15:22,318:INFO :     finding or creating draft metadata record...
2024-01-30 16:15:22,551:INFO :     creating new draft record...
2024-01-30 16:15:22,780:INFO :     uploading files for draft...
2024-01-30 16:15:22,781:INFO :     uploading files to draft...
2024-01-30 16:15:23,029:INFO :     attaching the record to the community...
2024-01-30 16:15:23,506:INFO :     creating or finding the user (submitter)...
2024-01-30 16:15:26,979:INFO :     created new user trmarvin@gmail.com...
2024-01-30 16:15:30,104:INFO :     activated new user trmarvin@gmail.com...
2024-01-30 16:15:30,110:INFO :     confirmed new user, id 6...
2024-01-30 16:15:30,110:INFO :     re-assigning ownership of the record to the submitter (trmarvin@gmail.com, 6)...
2024-01-30 16:15:30,112:INFO :     found existing user 4...
2024-01-30 16:15:34,312:INFO : ....done with record 2
2024-01-30 16:15:34,313:INFO : ....starting to load record 3
2024-01-30 16:15:34,313:INFO :     10.17613/M6FX27 hc:14365 1000361-251
2024-01-30 16:15:34,314:INFO :     finding or creating community...
2024-01-30 16:15:34,398:INFO :     finding or creating draft metadata record...
2024-01-30 16:15:34,655:INFO :     creating new draft record...
2024-01-30 16:15:34,992:INFO :     uploading files for draft...
2024-01-30 16:15:34,992:INFO :     uploading files to draft...
2024-01-30 16:15:35,178:INFO :     attaching the record to the community...
2024-01-30 16:15:35,679:INFO :     creating or finding the user (submitter)...
2024-01-30 16:15:35,695:INFO :     found existing user 6...
2024-01-30 16:15:35,695:INFO :     re-assigning ownership of the record to the submitter (trmarvin@gmail.com, 6)...
2024-01-30 16:15:35,697:INFO :     found existing user 4...
2024-01-30 16:15:39,573:INFO : ....done with record 3
2024-01-30 16:15:39,574:INFO : All done loading records into InvenioRDM
2024-01-30 16:15:39,574:INFO : Processed 2 records in InvenioRDM (2 to 3) 
    2 successful 
    2 new records created 
    0 already existed 
        0 updated published records 
        0 updated existing draft records 
        0 unchanged existing records 
        0 previously failed records repaired 
    0 failed 

2024-01-30 16:15:39,575:INFO : Touched records written to logs/invenio_record_importer_touched.jsonl
